{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<article class="bg-white p-6 rounded shadow mb-8">
    <h1 class="text-3xl font-bold mb-4">{{ post.title }}</h1>
    <p class="text-gray-700 leading-relaxed">{{ post.content }}</p>
</article>

<section class="mb-8">
    <h2 class="text-xl font-semibold mb-4">Comments</h2>

    {% if comments %}
        <ul class="space-y-3">
            {% for comment in comments %}
                <li class="bg-gray-50 p-3 rounded">
                    <strong>{{ comment.user.username }}</strong>
                    <p>{{ comment.content }}</p>
                    <small class="text-gray-500">{{ comment.created_at }}</small>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-gray-500">No comments yet.</p>
    {% endif %}
</section>

{% if user.is_authenticated %}
<section class="bg-white p-6 rounded shadow">
    <h3 class="font-semibold mb-2">Add a comment</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button class="mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Submit
        </button>
    </form>
    <p class="text-sm text-gray-500 mt-2">Comment appears after approval.</p>
</section>
{% else %}
<p>
    <a href="{% url 'login' %}" class="text-blue-600 underline">Login</a> to comment.
</p>
{% endif %}
{% endblock %}
